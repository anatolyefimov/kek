(this["webpackJsonppodcast.web"]=this["webpackJsonppodcast.web"]||[]).push([[0],{166:function(e,t,a){e.exports=a(269)},253:function(e,t,a){},255:function(e,t,a){},257:function(e,t,a){},258:function(e,t,a){},259:function(e,t,a){},269:function(e,t,a){"use strict";a.r(t);a(167),a(193),a(195),a(196),a(198),a(199),a(200),a(201),a(202),a(203),a(204),a(205),a(207),a(208),a(209),a(210),a(211),a(212),a(213),a(214),a(215),a(216),a(218),a(219),a(220),a(221),a(222),a(223),a(224),a(225),a(226),a(227),a(228),a(229),a(230),a(231),a(232),a(233),a(234),a(235);var n=a(0),r=a.n(n),c=a(91),o=a.n(c),l=a(38),i=a.n(l),s=a(36),u=a(103),d=a.n(u),m=(a(243),a(4)),p=a(99),f=a.n(p),g=(a(253),function(e){var t=e.id,a=e.go;return r.a.createElement(m.j,{id:t,centered:!0},r.a.createElement(m.k,null,"\u041f\u043e\u0434\u043a\u0430\u0441\u0442\u044b"),r.a.createElement(m.m,{icon:r.a.createElement(f.a,{className:"Home__icon"}),header:"\u0414\u043e\u0431\u0430\u0432\u044c\u0442\u0435 \u043f\u0435\u0440\u0432\u044b\u0439 \u043f\u043e\u0434\u043a\u0430\u0441\u0442",action:r.a.createElement(m.a,{size:"l",onClick:a,"data-to":"new-podcast"},"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u043f\u043e\u0434\u043a\u0430\u0441\u0442"),className:"Home__placeholder"},"\u0414\u043e\u0431\u0430\u0432\u043b\u044f\u0439\u0442\u0435, \u0440\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u0443\u0439\u0442\u0435 \u0438 \u0434\u0435\u043b\u0438\u0442\u0435\u0441\u044c \u043f\u043e\u0434\u043a\u0430\u0441\u0442\u0430\u043c\u0438 \u0432\u0430\u0448\u0435\u0433\u043e \u0441\u043e\u043e\u0431\u0449\u0435\u0441\u0442\u0432\u0430."))}),b=a(29),E=a.n(b),h=a(37),_=a(25),v=a(100),w=a.n(v),x=(a(255),a(271));function y(){return(y=Object(h.a)(E.a.mark((function e(t,a,n,r){var c,o,l,i,s;return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c=new FormData,console.log("trim",t),c.append("audio",t,a),c.append("left",n),c.append("right",r),e.next=7,fetch("/cut_audio",{method:"POST",body:c});case 7:return o=e.sent,console.log(o),l=o.body.getReader(),e.next=12,l.read();case 12:return i=e.sent,t=new Blob([i.value],{type:"audio/mp3"}),s=window.URL.createObjectURL(t),console.log(s),e.abrupt("return",s);case 17:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var N=function(e,t,a,n){return y.apply(this,arguments)},j=function(e){var t=e.id,a=e.go,n=e.setCurrentSettings,c=e.currentSettings,o=function(){var e=Object(h.a)(E.a.mark((function e(t){var a,r,c,o,i,s,u,d,m,p;return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.target.files[0],console.log(a),e.next=4,a.arrayBuffer();case 4:return r=e.sent,c=new AudioContext,o=[],e.next=9,c.decodeAudioData(r);case 9:for(i=e.sent,s=0;s<i.length;s+=Math.floor(i.length/100)){for(u=0,d=0;d<i.numberOfChannels;++d)u+=i.getChannelData(d)[s];u/=i.numberOfChannels,u+=1,u/=2,o.push(u)}n((function(e){return Object(_.a)(Object(_.a)({},e),{},{waves:o})})),m=l(i.duration),(p=new FileReader).onload=function(e){n((function(e){return Object(_.a)(Object(_.a)({},e),{},{audioDurationString:m,audioName:a.name,audio:p.result})}))},p.readAsDataURL(a),console.log(a);case 17:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),l=function(e){var t=Math.round(e),a=Math.round(t/60),n=t%60;return"".concat(a>9?a:"0".concat(a),":").concat(n>9?n:"0".concat(n))};return r.a.createElement(m.j,{id:t,className:"NewPodcast"},r.a.createElement(m.k,{left:r.a.createElement(m.l,{onClick:a,"data-to":"home"})},"\u041d\u043e\u0432\u044b\u0439 \u043f\u043e\u0434\u043a\u0430\u0441\u0442"),r.a.createElement(m.h,null,r.a.createElement(m.f,{style:{display:"flex",padding:0}},r.a.createElement(m.f,{className:"NewPodcast__imageOverlay"},c.imgSrc?r.a.createElement("img",{className:"NewPodcast__image",src:c.imgSrc,alt:"\u041e\u0431\u043b\u043e\u0436\u043a\u0430\u0444",onClick:function(){n((function(e){return Object(_.a)(Object(_.a)({},e),{},{imgSrc:null})}))}}):r.a.createElement(m.g,{tabIndex:0,mode:"overlay_primary",className:"cover-input",accept:"image/*",onChange:function(e){var t=new FileReader;t.onload=function(){return t.result},t.readAsDataURL(e.target.files[0])}},r.a.createElement(w.a,{className:"cover-input__icon",width:32,height:32}))),r.a.createElement(m.f,{className:"NewPodcast__TopForm"},r.a.createElement(m.h,{Component:"div"},r.a.createElement(m.i,{top:"\u041d\u0430\u0437\u0432\u0430\u043d\u0438\u0435",placeholder:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043d\u0430\u0437\u0432\u0430\u043d\u0438\u0435 \u043f\u043e\u0434\u043a\u0430\u0441\u0442\u0430",className:"NewPodcast__name",value:c.podcastName,onChange:function(e){e.persist(),n((function(t){return Object(_.a)(Object(_.a)({},t),{},{podcastName:e.target.value})}))}}))))),r.a.createElement(m.h,null,r.a.createElement(m.o,{value:c.podcastDescription,onChange:function(e){e.persist(),n((function(t){return Object(_.a)(Object(_.a)({},t),{},{podcastDescription:e.target.value})}))},top:"\u041e\u043f\u0438\u0441\u0430\u043d\u0438\u0435 \u043f\u043e\u0434\u043a\u0430\u0441\u0442\u0430"})),c.audio?r.a.createElement(m.f,null,r.a.createElement(m.d,{className:"NewPodcast__audioInfo",before:r.a.createElement(m.c,{style:{width:"48px",height:"48px",display:"flex",justifyContent:"center",alignItems:"center"}},r.a.createElement(x.a,null)),asideContent:c.audioDurationString},c.audioName),r.a.createElement(m.b,{level:"1",className:"",weight:"regular",style:{color:"#818C99",marginTop:"10px"}},"\u0412\u044b \u043c\u043e\u0436\u0435\u0442\u0435 \u0434\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u0442\u0430\u0439\u043c\u043a\u043e\u0434\u044b \u0438 \u0441\u043a\u043e\u0440\u0440\u0435\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u0442\u044c \u043f\u043e\u0434\u043a\u0430\u0441\u0442 \u0432 \u0440\u0435\u0436\u0438\u043c\u0435 \u0440\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u044f"),r.a.createElement(m.a,{size:"xl",mode:"outline",style:{marginTop:"18px"},onClick:a,"data-to":"edit-audio"},"\u0420\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u0442\u044c \u0430\u0443\u0434\u0438\u043e\u0437\u0430\u043f\u0438\u0441\u044c")):r.a.createElement(m.m,{header:"\u0417\u0430\u0433\u0440\u0443\u0437\u0438\u0442\u0435 \u0412\u0430\u0448 \u043f\u043e\u0434\u043a\u0430\u0441\u0442",className:"NewPodcast__placeholder",action:r.a.createElement(m.g,{style:{cursor:"pointer"},tabIndex:0,accept:"audio/*",onChange:o,mode:"outline",controlSize:"l"},"\u0417\u0430\u0433\u0440\u0443\u0437\u0438\u0442\u044c \u0444\u0430\u0439\u043b")},"\u0412\u044b\u0431\u0435\u0440\u0438\u0442\u0435 \u0433\u043e\u0442\u043e\u0432\u044b\u0439 \u0430\u0443\u0434\u0438\u043e\u0444\u0430\u0439\u043b \u0438\u0437 \u0432\u0430\u0448\u0435\u0433\u043e \u0442\u0435\u043b\u0435\u0444\u043e\u043d\u0430 \u0438 \u0434\u043e\u0431\u0430\u0432\u044c\u0442\u0435 \u0435\u0433\u043e"),r.a.createElement(m.n,{style:{marginBottom:"2px",marginTop:"10px"}}),r.a.createElement(m.h,{className:"NewPodcast__checkboxes"},r.a.createElement(m.e,{tabIndex:0,className:"NewPodcast__checkbox"},"\u041d\u0435\u043d\u043e\u0440\u043c\u0430\u0442\u0438\u0432\u043d\u044b\u0439 \u043a\u043e\u043d\u0442\u0435\u043d\u0442"),r.a.createElement(m.e,{tabIndex:0,className:"NewPodcast__checkbox"},"\u0418\u0441\u043a\u043b\u044e\u0447\u0438\u0442\u044c \u044d\u043f\u0438\u0437\u043e\u0434 \u0438\u0437 \u044d\u043a\u0441\u043f\u043e\u0440\u0442\u0430"),r.a.createElement(m.e,{tabIndex:0,className:"NewPodcast__checkbox"},"\u0422\u0440\u0435\u0439\u043b\u0435\u0440 \u043f\u043e\u0434\u043a\u0430\u0441\u0442\u0430")),r.a.createElement(m.d,{className:"NewPodcast__privacyCell",expandable:!0,size:"l",description:"\u0412\u0441\u0435\u043c \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044f\u043c"},"\u041a\u043e\u043c\u0443 \u0434\u043e\u0441\u0442\u0443\u043f\u0435\u043d \u0434\u0430\u043d\u043d\u044b\u0439 \u043f\u043e\u0434\u043a\u0430\u0441\u0442"),r.a.createElement(m.f,{style:{paddingTop:0}},r.a.createElement(m.b,{level:"1",weight:"regular",style:{color:"#818C99"}},"\u041f\u0440\u0438 \u043f\u0443\u0431\u043b\u0438\u043a\u0430\u0446\u0438\u0438 \u0437\u0430\u043f\u0438\u0441\u0438 \u0441 \u044d\u043f\u0438\u0437\u043e\u0434\u043e\u043c, \u043e\u043d \u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u0441\u044f \u0434\u043e\u0441\u0442\u0443\u043f\u043d\u044b\u043c \u0434\u043b\u044f \u0432\u0441\u0435\u0445 \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u0435\u0439")),r.a.createElement(m.f,{style:{flexGrow:1,padding:0}}),r.a.createElement(m.f,null,r.a.createElement(m.a,{disabled:!c.imgSrc||!c.podcastName||!c.podcastDescription||!c.audio,size:"xl",mode:"primary"},"\u0414\u0430\u043b\u0435\u0435")))},O=a(48),C=a.n(O),k=(a(90),a(102)),S=a.n(k),P=a(101),T=a.n(P);var R=function(e){for(var t=e.indexOf(";base64,")+";base64,".length,a=e.substring(t),n=window.atob(a),r=n.length,c=new Uint8Array(new ArrayBuffer(r)),o=0;o<r;o++)c[o]=n.charCodeAt(o);return c},D=(a(257),function(e){var t=e.id,a=e.audioSrc,c=e.waves,o=Object(n.useRef)(),l=(Object(n.useRef)(),Object(n.useState)(0)),i=Object(s.a)(l,2),u=i[0],d=i[1],p=Object(n.useState)(!1),f=Object(s.a)(p,2),g=f[0],b=f[1],_=Object(n.useState)(),v=Object(s.a)(_,2),w=(v[0],v[1],function(e){console.log(o.current.duration),d(e.target.currentTime/o.current.duration*100)});w=function(e,t){var a,n,r=!1;return function c(){if(r)return a=arguments,void(n=this);e.apply(this,arguments),r=!0,setTimeout((function(){r=!1,a&&(c.apply(n,a),a=n=null)}),t)}}(w,1e5),Object(n.useEffect)((function(){o.current.addEventListener("timeupdate",w)}));var x=function(){var e=Object(h.a)(E.a.mark((function e(t,a){var n,r;return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=R(o.current.src),r=new Blob([n],{type:"audio/mp3"}),e.next=4,N(r,"audio.mp3",5,10);case 4:o.current.src=e.sent;case 5:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}();return r.a.createElement(m.j,{id:t},r.a.createElement(m.k,null,"\u0420\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u0435"),r.a.createElement("audio",{ref:o,id:"audio",src:a},"Your browser does not support the audio element."),r.a.createElement("div",{style:{borderRadius:"10px",border:"0.5px solid rgba(0, 0, 0, 0.12)",margin:"0 12px",position:"relative"}},r.a.createElement(C.a,{className:"double-slider",range:{min:0,max:100},start:[20,80],connect:!0}),r.a.createElement("input",{className:"slider_play",type:"range",style:{position:"absolute",top:-70,left:0,zIndex:100},step:"0.1",value:u,onChange:function(e){console.log(o.current.duration),o.current.currentTime=o.current.duration*e.target.value/100,d(e.target.value)}}),r.a.createElement(m.f,{style:{display:"flex",alignItems:"center",justifyContent:"space-between",height:96,backgroundColor:"#F2F3F5",position:"relative",borderRadius:"10px 10px 0 0"}},c.map((function(e){return r.a.createElement("div",{style:{height:e<.5?40*e*.5:40*e,width:2,borderRadius:"2px",backgroundColor:"#3F8AE0"}})}))),r.a.createElement("div",{className:"toolbar"},r.a.createElement(m.a,{className:"toolbar__button",onClick:function(){g?o.current.pause():o.current.play(),b(!g)}},g?r.a.createElement(T.a,null):r.a.createElement(S.a,null)),r.a.createElement(m.a,{className:"toolbar__button",onClick:x}))))}),I=(a(258),function(e){var t=e.id;e.go;return r.a.createElement(m.j,{id:t,centered:!0},r.a.createElement(m.k,null,"\u0420\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u0435"),r.a.createElement("input",{className:"slider_play",type:"range"}))}),B=(a(259),function(e){var t=e.id;e.go;return r.a.createElement(m.j,{id:t,centered:!0},r.a.createElement(m.k,null,"\u0420\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u0435"),r.a.createElement("img",{style:{position:"absolute",width:"100%"},src:"https://upload.wikimedia.org/wikipedia/commons/thumb/4/4b/La_Tour_Eiffel_vue_de_la_Tour_Saint-Jacques%2C_Paris_ao%C3%BBt_2014_%282%29.jpg/1200px-La_Tour_Eiffel_vue_de_la_Tour_Saint-Jacques%2C_Paris_ao%C3%BBt_2014_%282%29.jpg"}),r.a.createElement(C.a,{className:"double-slider",range:{min:0,max:100},start:[20,80],connect:!0}))}),A=function(){var e=Object(n.useState)("home"),t=Object(s.a)(e,2),a=t[0],c=t[1],o=Object(n.useState)({audioName:"\u041c\u0438\u0445\u0430\u0438\u043b \u041a\u0440\u0443\u0433.mp3",audioDurationString:"59:41"}),l=Object(s.a)(o,2),i=l[0],u=l[1],m=function(e){c(e.currentTarget.dataset.to)};return r.a.createElement(d.a,{activePanel:a},r.a.createElement(g,{id:"home",go:m}),r.a.createElement(j,{id:"new-podcast",go:m,currentSettings:i,setCurrentSettings:u}),r.a.createElement(D,{id:"edit-audio",audioSrc:i.audio,waves:i.waves}),r.a.createElement(I,{id:"slider-test",go:m}),r.a.createElement(B,{id:"double-slider-test",go:m}))};i.a.send("VKWebAppInit"),o.a.render(r.a.createElement(A,null),document.getElementById("root"))}},[[166,1,2]]]);
//# sourceMappingURL=main.c26119bb.chunk.js.map